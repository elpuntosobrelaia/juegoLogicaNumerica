<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LogicPuzzle - Desafío de Patrones</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f8ff;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    
    .container {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 20px;
      width: 90%;
      max-width: 600px;
      text-align: center;
    }
    
    h1 {
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .level-indicator {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    
    .level-dot {
      width: 15px;
      height: 15px;
      background-color: #ddd;
      border-radius: 50%;
      margin: 0 5px;
      transition: background-color 0.3s;
    }
    
    .active {
      background-color: #3498db;
    }
    
    .completed {
      background-color: #2ecc71;
    }
    
    .puzzle-container {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #eee;
      border-radius: 8px;
      background-color: #f9f9f9;
    }
    
    .pattern-display {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }
    
    .pattern-item {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 50px;
      height: 50px;
      margin: 5px;
      border-radius: 5px;
      font-size: 24px;
      font-weight: bold;
      background-color: #e0e0e0;
    }
    
    .question-mark {
      background-color: #3498db;
      color: white;
    }
    
    .options-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
    }
    
    .option-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background-color: #3498db;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .option-btn:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }
    
    .message {
      height: 30px;
      margin: 10px 0;
      font-weight: bold;
    }
    
    .success {
      color: #2ecc71;
    }
    
    .error {
      color: #e74c3c;
    }
    
    .btn-container {
      margin-top: 20px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background-color: #2c3e50;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
      margin: 0 5px;
    }
    
    .btn:hover {
      background-color: #1a252f;
    }
    
    .btn:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
    }
    
    .instructions {
      text-align: left;
      margin-bottom: 20px;
      font-size: 14px;
      color: #555;
    }
    
    .level-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 14px;
    }
    
    .game-over {
      font-size: 24px;
      color: #2c3e50;
      margin: 20px 0;
    }
    
    .shape {
      width: 40px;
      height: 40px;
    }
    
    .geometric-container {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .hidden {
      display: none;
    }
    
    @media (max-width: 500px) {
      .pattern-item {
        width: 40px;
        height: 40px;
        font-size: 18px;
      }
      
      .option-btn {
        padding: 8px 15px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>LogicPuzzle</h1>
    <p>Resuelve el patrón lógico en cada nivel</p>
    
    <div class="level-stats">
      <span>Nivel: <span id="level-display">1</span>/5</span>
      <span>Puntos: <span id="score-display">0</span></span>
    </div>
    
    <div class="level-indicator">
      <div class="level-dot active" id="dot-1"></div>
      <div class="level-dot" id="dot-2"></div>
      <div class="level-dot" id="dot-3"></div>
      <div class="level-dot" id="dot-4"></div>
      <div class="level-dot" id="dot-5"></div>
    </div>
    
    <div class="instructions" id="instructions">
      Encuentra el siguiente número en la secuencia lógica.
    </div>
    
    <div class="puzzle-container">
      <div class="pattern-display" id="pattern-display">
        <!-- Pattern will be generated here -->
      </div>
      
      <div class="options-container" id="options-container">
        <!-- Options will be generated here -->
      </div>
    </div>
    
    <div class="message" id="message"></div>
    
    <div class="btn-container">
      <button class="btn" id="next-btn" disabled>Siguiente nivel</button>
      <button class="btn" id="retry-btn">Reintentar</button>
    </div>
  </div>

  <script>
    // Game state
    const gameState = {
      currentLevel: 1,
      score: 0,
      attempts: 0,
      maxLevel: 5,
      levelCompleted: false
    };
    
    // DOM Elements
    const patternDisplay = document.getElementById('pattern-display');
    const optionsContainer = document.getElementById('options-container');
    const messageEl = document.getElementById('message');
    const nextBtn = document.getElementById('next-btn');
    const retryBtn = document.getElementById('retry-btn');
    const levelDisplay = document.getElementById('level-display');
    const scoreDisplay = document.getElementById('score-display');
    const instructionsEl = document.getElementById('instructions');
    
    // Level configurations
    const levels = [
      // Level 1: Simple number sequence
      {
        type: 'number',
        pattern: [2, 4, 6, 8],
        answer: 10,
        options: [9, 10, 11, 12],
        instructions: 'Encuentra el siguiente número en la secuencia lógica.'
      },
      // Level 2: Alternating pattern
      {
        type: 'number',
        pattern: [3, 7, 11, 15],
        answer: 19,
        options: [18, 19, 20, 21],
        instructions: 'Identifica el patrón y encuentra el valor que sigue.'
      },
      // Level 3: Multiplication/division pattern
      {
        type: 'number',
        pattern: [2, 6, 18, 54],
        answer: 162,
        options: [108, 162, 72, 216],
        instructions: 'Observa cómo cambian los números y determina el siguiente valor.'
      },
      // Level 4: Fibonacci-like sequence with a twist
      {
        type: 'number',
        pattern: [1, 3, 4, 7, 11],
        answer: 18,
        options: [15, 16, 18, 22],
        instructions: 'Esta secuencia sigue un patrón matemático específico. ¿Cuál es el siguiente número?'
      },
      // Level 5: Complex pattern with multiple operations
      {
        type: 'number',
        pattern: [4, 9, 16, 25, 36],
        answer: 49,
        options: [45, 47, 49, 64],
        instructions: 'Analiza el patrón cuidadosamente para encontrar el siguiente número.'
      }
    ];
    
    // Initialize the game
    function initGame() {
      gameState.currentLevel = 1;
      gameState.score = 0;
      gameState.attempts = 0;
      gameState.levelCompleted = false;
      
      updateLevelDisplay();
      loadLevel(gameState.currentLevel);
      updateDots();
    }
    
    // Load a specific level
    function loadLevel(levelNum) {
      // Reset state for new level
      gameState.levelCompleted = false;
      gameState.attempts = 0;
      nextBtn.disabled = true;
      messageEl.textContent = '';
      messageEl.className = 'message';
      
      const level = levels[levelNum - 1];
      
      // Update instructions
      instructionsEl.textContent = level.instructions;
      
      // Clear previous content
      patternDisplay.innerHTML = '';
      optionsContainer.innerHTML = '';
      
      // Create pattern display
      level.pattern.forEach(item => {
        const patternItem = document.createElement('div');
        patternItem.className = 'pattern-item';
        
        if (level.type === 'number') {
          patternItem.textContent = item;
        }
        
        patternDisplay.appendChild(patternItem);
      });
      
      // Add question mark item
      const questionItem = document.createElement('div');
      questionItem.className = 'pattern-item question-mark';
      questionItem.textContent = '?';
      patternDisplay.appendChild(questionItem);
      
      // Create options
      level.options.forEach(option => {
        const optionBtn = document.createElement('button');
        optionBtn.className = 'option-btn';
        optionBtn.textContent = option;
        optionBtn.addEventListener('click', () => checkAnswer(option, level.answer));
        optionsContainer.appendChild(optionBtn);
      });
    }
    
    // Check the player's answer
    function checkAnswer(selectedOption, correctAnswer) {
      if (gameState.levelCompleted) return;
      
      gameState.attempts++;
      
      if (selectedOption === correctAnswer) {
        // Correct answer
        messageEl.textContent = '¡Correcto!';
        messageEl.className = 'message success';
        gameState.levelCompleted = true;
        nextBtn.disabled = false;
        
        // Calculate score based on attempts
        const pointsEarned = Math.max(10 - (gameState.attempts - 1) * 2, 1);
        gameState.score += pointsEarned;
        scoreDisplay.textContent = gameState.score;
        
        // Update dot to completed
        document.getElementById(`dot-${gameState.currentLevel}`).className = 'level-dot completed';
        
        // Check if game is completed
        if (gameState.currentLevel === gameState.maxLevel) {
          gameCompleted();
        }
      } else {
        // Incorrect answer
        messageEl.textContent = 'Incorrecto. Intenta de nuevo.';
        messageEl.className = 'message error';
      }
    }
    
    // Move to the next level
    function nextLevel() {
      if (gameState.currentLevel < gameState.maxLevel) {
        gameState.currentLevel++;
        updateLevelDisplay();
        loadLevel(gameState.currentLevel);
        updateDots();
      }
    }
    
    // Retry the current level
    function retryLevel() {
      loadLevel(gameState.currentLevel);
    }
    
    // Update the level display
    function updateLevelDisplay() {
      levelDisplay.textContent = gameState.currentLevel;
    }
    
    // Update level indicator dots
    function updateDots() {
      // Reset all dots
      for (let i = 1; i <= gameState.maxLevel; i++) {
        const dot = document.getElementById(`dot-${i}`);
        if (i < gameState.currentLevel) {
          dot.className = 'level-dot completed';
        } else if (i === gameState.currentLevel) {
          dot.className = 'level-dot active';
        } else {
          dot.className = 'level-dot';
        }
      }
    }
    
    // Game completed
    function gameCompleted() {
      messageEl.textContent = `¡Felicidades! Has completado todos los niveles con ${gameState.score} puntos.`;
      messageEl.className = 'message success';
      nextBtn.disabled = true;
      
      // Add game over message
      const gameOverEl = document.createElement('div');
      gameOverEl.className = 'game-over';
      gameOverEl.textContent = '¡Juego Completado!';
      document.querySelector('.puzzle-container').appendChild(gameOverEl);
      
      // Change retry button to restart
      retryBtn.textContent = 'Reiniciar juego';
      retryBtn.removeEventListener('click', retryLevel);
      retryBtn.addEventListener('click', initGame);
    }
    
    // Event listeners
    nextBtn.addEventListener('click', nextLevel);
    retryBtn.addEventListener('click', retryLevel);
    
    // Start the game
    initGame();
  </script>
</body>
</html>
